<!DOCTYPE html>
<html lang="en">
<head>
  
  <title>Hello, AGOL!</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />

  <!-- calls for the arcgis api's css file and js library-->

  <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.25/"></script>

  <!-- modules needed for full screen map -->
  <script>  
  require([
    "esri/config",
    "esri/Map",
    "esri/views/MapView",
    "esri/widgets/BasemapGallery",
    "esri/widgets/Expand",
    "esri/widgets/Locate",
    "esri/widgets/Search",
    // new modules for graphics lab 2 part 3
    "esri/Graphic",  
    "esri/layers/GraphicsLayer"
  ], function(esriConfig, Map, MapView, BasemapGallery, Expand, Locate, Search, Graphic, GraphicsLayer) {   
  
    esriConfig.apiKey = "AAPTxy8BH1VEsoebNVZXo8HurBvZ7IXFuSOhRBuDgv645DOBpnCJ2vtGJsSqd0m31lu7G8oTSCniq7WBlH5N3K2i5Kk1zQ90Yxo4NRi0pv9a9tVhNCaTXh4UYBVSuMTZ4n-VHPYlh3hbIHglPgtC4dS9xt9DvdwtH300t76D_qaoPY1hHx-ZWazuU7A71NQteoVL5YMZ3d0qyiM8FhAB_8wsn9Lfxg-Z0qlqMFoRqQ2XStDdlWe0dU69PsLBWTeob7thAT1_t2Pq0hM2"
    
    const map = new Map({ 
      basemap: "national-geographic", // basemap layer service 
    });

    const view = new MapView({
      map: map,
      center: [-97.7335, 30.2850], // longitude, latitude **(updated to my alma mater - UT Autsin)
      scale: 25000, // **(updated from zoom to scale; set to encompass all of main campus)
      container: "viewDiv" // div element
    });

    const basemapGallery = new BasemapGallery({ //default Basemap Gallery Widget
      view: view,
    });

    const expand = new Expand({ //put basemap gallery widget in an expandable tab
        view: view,
        content: basemapGallery 
    });
    view.ui.add(expand, "top-right"); //set expandable tab in top-right of map

    const locate = new Locate({ //locate Widget
      view: view
    });
    view.ui.add(locate, {
      position: "bottom-left" //set locate widget in bottom-left of map
    });
    
    const search = new Search({ //search Widget
      view: view
    });
    view.ui.add(search, {
      position: "top-left", //set search widget in top-left of map
      index: 2
    });
    
    // constructor for graphics layer lab 2 part 3
    const graphicsLayer = new GraphicsLayer();  
    map.add(graphicsLayer);
    
    // geometry of the pt
    const point = { //Create a point  
    type: "point",  
    longitude: -97.7357,    //long lat of JGB
    latitude: 30.2858
    };
    // marker style
    const simpleMarkerSymbol = {  
    type: "simple-marker",
    style: "x",
    size: "8px",  
    outline: {  
      color: [204, 85, 0], // burnt orange  
      width: 2
      }  
    };
    // define popup properties
    const PopupTemplate = {
    title: "{Name}",
    content: "{Description}"
    };
    const ptAttributes = {
    Name: "Jackson School of Geosciences",
    Description: "Home of the UT - Austin geology department"
    };
    // create the pt
    const pointGraphic = new Graphic({  
    geometry: point,  
    symbol: simpleMarkerSymbol,
    attributes: ptAttributes,
    popupTemplate: PopupTemplate  
    });
    //add pt to graphics layer
    graphicsLayer.add(pointGraphic);

    // polyline geometry
    const polyline = {
      type: "polyline",
      paths: [
        [-97.7782, 30.2843],
        [-97.7357, 30.2858]
      ]
    };
    // polyline marker style
    const simpleLineSymbol = {
      type: "simple-line",
      color: "brown",
      width: 1,
      style: "dot"
    };
     // polyline graphic
    const polylineGraphic = new Graphic({
      geometry: polyline,
      symbol: simpleLineSymbol
    });
    // add polyline to graphics layer
    graphicsLayer.add(polylineGraphic);


    // polygon geometry
    const polygon = {
      type: "polygon",
      rings: [
        [-97.775569, 30.280904],
        [-97.780298, 30.287658],
        [-97.783298, 30.284200],
        [-97.777724, 30.279288],
        [-97.775569, 30.280904]
      ]
    };
    // polygon popup properties
    const polyAttributes = {
    Name: "Brackenridge Field Laboratory",
    Description: "An urban field station for ecology research"
    };
    // polygon fill style
    const simpleFillSymbol = {
      type: "simple-fill",
      color: [204, 85, 0, 0.5],
      style: "solid",
      outline: {
        width: 0
      }
    };
    // polygon graphic
    const polygonGraphic = new Graphic({
      geometry: polygon,
      symbol: simpleFillSymbol,
      attributes: polyAttributes,
      popupTemplate: PopupTemplate 
    });
    // add polygon to graphics layer
    graphicsLayer.add(polygonGraphic);

  });  
  </script>

  <!-- css to make a full screen map -->
  <style>  
    html,  
    body,  
    #viewDiv {
      padding: 0;
      margin: 0;  
      height: 100%;  
      width: 100%;  
    }  
  </style>

</head>

<body>
  <!-- div to display the map-->
  <div id="viewDiv"></div> 

</body>

</html>
